{"ast":null,"code":"import { inject, signal, computed } from '@angular/core';\nimport { Overlay } from '@angular/cdk/overlay';\nimport { ComponentPortal } from '@angular/cdk/portal';\nimport * as i0 from \"@angular/core\";\n/**\n * Standalone loading spinner component\n */\nexport class LoadingSpinnerComponent {\n  static {\n    this.ɵfac = function LoadingSpinnerComponent_Factory(t) {\n      return new (t || LoadingSpinnerComponent)();\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: LoadingSpinnerComponent,\n      selectors: [[\"app-loading-spinner\"]],\n      standalone: true,\n      features: [i0.ɵɵStandaloneFeature],\n      decls: 5,\n      vars: 0,\n      consts: [[1, \"flex\", \"flex-col\", \"items-center\", \"justify-center\", \"gap-4\"], [1, \"relative\"], [1, \"w-12\", \"h-12\", \"border-4\", \"border-slate-700\", \"border-t-cyan-500\", \"rounded-full\", \"animate-spin\"], [1, \"text-sm\", \"text-slate-400\", \"font-medium\", \"animate-pulse\"]],\n      template: function LoadingSpinnerComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1);\n          i0.ɵɵelement(2, \"div\", 2);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(3, \"span\", 3);\n          i0.ɵɵtext(4, \"Loading...\");\n          i0.ɵɵelementEnd()();\n        }\n      },\n      styles: [\"[_nghost-%COMP%] {\\n      display: flex;\\n      align-items: center;\\n      justify-content: center;\\n    }\\n  \\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvc2hhcmVkL3RvYXN0L2xvYWRpbmcuc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0lBQ0k7TUFDRSxhQUFhO01BQ2IsbUJBQW1CO01BQ25CLHVCQUF1QjtJQUN6QiIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgIDpob3N0IHtcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgfVxuICAiXSwic291cmNlUm9vdCI6IiJ9 */\"]\n    });\n  }\n}\nexport class LoadingService {\n  constructor() {\n    this.overlay = inject(Overlay);\n    this.overlayRef = null;\n    this.loadingCount = signal(0);\n    /**\n     * Whether the loading overlay is currently visible\n     */\n    this.isLoading = computed(() => this.loadingCount() > 0);\n  }\n  /**\n   * Show the loading overlay\n   * Supports nested calls - overlay stays visible until all hide() calls match show() calls\n   */\n  show() {\n    this.loadingCount.update(count => count + 1);\n    if (this.loadingCount() === 1) {\n      this.createOverlay();\n    }\n  }\n  /**\n   * Hide the loading overlay\n   * Only actually hides when all nested show() calls have been matched with hide()\n   */\n  hide() {\n    this.loadingCount.update(count => Math.max(0, count - 1));\n    if (this.loadingCount() === 0) {\n      this.destroyOverlay();\n    }\n  }\n  /**\n   * Force hide the loading overlay regardless of nested calls\n   */\n  forceHide() {\n    this.loadingCount.set(0);\n    this.destroyOverlay();\n  }\n  createOverlay() {\n    if (this.overlayRef) {\n      return;\n    }\n    this.overlayRef = this.overlay.create({\n      hasBackdrop: true,\n      backdropClass: ['bg-slate-900/80', 'backdrop-blur-sm'],\n      positionStrategy: this.overlay.position().global().centerHorizontally().centerVertically(),\n      scrollStrategy: this.overlay.scrollStrategies.block()\n    });\n    this.overlayRef.attach(new ComponentPortal(LoadingSpinnerComponent));\n  }\n  destroyOverlay() {\n    if (this.overlayRef?.hasAttached()) {\n      this.overlayRef.detach();\n    }\n    this.overlayRef?.dispose();\n    this.overlayRef = null;\n  }\n  static {\n    this.ɵfac = function LoadingService_Factory(t) {\n      return new (t || LoadingService)();\n    };\n  }\n  static {\n    this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n      token: LoadingService,\n      factory: LoadingService.ɵfac,\n      providedIn: 'root'\n    });\n  }\n}","map":{"version":3,"names":["inject","signal","computed","Overlay","ComponentPortal","LoadingSpinnerComponent","selectors","standalone","features","i0","ɵɵStandaloneFeature","decls","vars","consts","template","LoadingSpinnerComponent_Template","rf","ctx","ɵɵelementStart","ɵɵelement","ɵɵelementEnd","ɵɵtext","LoadingService","constructor","overlay","overlayRef","loadingCount","isLoading","show","update","count","createOverlay","hide","Math","max","destroyOverlay","forceHide","set","create","hasBackdrop","backdropClass","positionStrategy","position","global","centerHorizontally","centerVertically","scrollStrategy","scrollStrategies","block","attach","hasAttached","detach","dispose","factory","ɵfac","providedIn"],"sources":["/home/kojo/work/JojoAddisonDev/kojo-stack/src/app/shared/toast/loading.service.ts"],"sourcesContent":["import { inject, Injectable, signal, computed } from '@angular/core';\nimport { Overlay, OverlayRef } from '@angular/cdk/overlay';\nimport { ComponentPortal } from '@angular/cdk/portal';\nimport { Component } from '@angular/core';\n\n/**\n * Standalone loading spinner component\n */\n@Component({\n  selector: 'app-loading-spinner',\n  standalone: true,\n  template: `\n    <div class=\"flex flex-col items-center justify-center gap-4\">\n      <div class=\"relative\">\n        <div class=\"w-12 h-12 border-4 border-slate-700 border-t-cyan-500 rounded-full animate-spin\"></div>\n      </div>\n      <span class=\"text-sm text-slate-400 font-medium animate-pulse\">Loading...</span>\n    </div>\n  `,\n  styles: [`\n    :host {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n    }\n  `]\n})\nexport class LoadingSpinnerComponent {}\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class LoadingService {\n  private readonly overlay = inject(Overlay);\n  private overlayRef: OverlayRef | null = null;\n  private loadingCount = signal(0);\n\n  /**\n   * Whether the loading overlay is currently visible\n   */\n  readonly isLoading = computed(() => this.loadingCount() > 0);\n\n  /**\n   * Show the loading overlay\n   * Supports nested calls - overlay stays visible until all hide() calls match show() calls\n   */\n  show(): void {\n    this.loadingCount.update(count => count + 1);\n    \n    if (this.loadingCount() === 1) {\n      this.createOverlay();\n    }\n  }\n\n  /**\n   * Hide the loading overlay\n   * Only actually hides when all nested show() calls have been matched with hide()\n   */\n  hide(): void {\n    this.loadingCount.update(count => Math.max(0, count - 1));\n    \n    if (this.loadingCount() === 0) {\n      this.destroyOverlay();\n    }\n  }\n\n  /**\n   * Force hide the loading overlay regardless of nested calls\n   */\n  forceHide(): void {\n    this.loadingCount.set(0);\n    this.destroyOverlay();\n  }\n\n  private createOverlay(): void {\n    if (this.overlayRef) {\n      return;\n    }\n\n    this.overlayRef = this.overlay.create({\n      hasBackdrop: true,\n      backdropClass: ['bg-slate-900/80', 'backdrop-blur-sm'],\n      positionStrategy: this.overlay.position()\n        .global()\n        .centerHorizontally()\n        .centerVertically(),\n      scrollStrategy: this.overlay.scrollStrategies.block(),\n    });\n\n    this.overlayRef.attach(new ComponentPortal(LoadingSpinnerComponent));\n  }\n\n  private destroyOverlay(): void {\n    if (this.overlayRef?.hasAttached()) {\n      this.overlayRef.detach();\n    }\n    this.overlayRef?.dispose();\n    this.overlayRef = null;\n  }\n}\n"],"mappings":"AAAA,SAASA,MAAM,EAAcC,MAAM,EAAEC,QAAQ,QAAQ,eAAe;AACpE,SAASC,OAAO,QAAoB,sBAAsB;AAC1D,SAASC,eAAe,QAAQ,qBAAqB;;AAGrD;;;AAsBA,OAAM,MAAOC,uBAAuB;;;uBAAvBA,uBAAuB;IAAA;EAAA;;;YAAvBA,uBAAuB;MAAAC,SAAA;MAAAC,UAAA;MAAAC,QAAA,GAAAC,EAAA,CAAAC,mBAAA;MAAAC,KAAA;MAAAC,IAAA;MAAAC,MAAA;MAAAC,QAAA,WAAAC,iCAAAC,EAAA,EAAAC,GAAA;QAAA,IAAAD,EAAA;UAd9BP,EADF,CAAAS,cAAA,aAA6D,aACrC;UACpBT,EAAA,CAAAU,SAAA,aAAmG;UACrGV,EAAA,CAAAW,YAAA,EAAM;UACNX,EAAA,CAAAS,cAAA,cAA+D;UAAAT,EAAA,CAAAY,MAAA,iBAAU;UAC3EZ,EAD2E,CAAAW,YAAA,EAAO,EAC5E;;;;;;;AAeV,OAAM,MAAOE,cAAc;EAH3BC,YAAA;IAImB,KAAAC,OAAO,GAAGxB,MAAM,CAACG,OAAO,CAAC;IAClC,KAAAsB,UAAU,GAAsB,IAAI;IACpC,KAAAC,YAAY,GAAGzB,MAAM,CAAC,CAAC,CAAC;IAEhC;;;IAGS,KAAA0B,SAAS,GAAGzB,QAAQ,CAAC,MAAM,IAAI,CAACwB,YAAY,EAAE,GAAG,CAAC,CAAC;;EAE5D;;;;EAIAE,IAAIA,CAAA;IACF,IAAI,CAACF,YAAY,CAACG,MAAM,CAACC,KAAK,IAAIA,KAAK,GAAG,CAAC,CAAC;IAE5C,IAAI,IAAI,CAACJ,YAAY,EAAE,KAAK,CAAC,EAAE;MAC7B,IAAI,CAACK,aAAa,EAAE;;EAExB;EAEA;;;;EAIAC,IAAIA,CAAA;IACF,IAAI,CAACN,YAAY,CAACG,MAAM,CAACC,KAAK,IAAIG,IAAI,CAACC,GAAG,CAAC,CAAC,EAAEJ,KAAK,GAAG,CAAC,CAAC,CAAC;IAEzD,IAAI,IAAI,CAACJ,YAAY,EAAE,KAAK,CAAC,EAAE;MAC7B,IAAI,CAACS,cAAc,EAAE;;EAEzB;EAEA;;;EAGAC,SAASA,CAAA;IACP,IAAI,CAACV,YAAY,CAACW,GAAG,CAAC,CAAC,CAAC;IACxB,IAAI,CAACF,cAAc,EAAE;EACvB;EAEQJ,aAAaA,CAAA;IACnB,IAAI,IAAI,CAACN,UAAU,EAAE;MACnB;;IAGF,IAAI,CAACA,UAAU,GAAG,IAAI,CAACD,OAAO,CAACc,MAAM,CAAC;MACpCC,WAAW,EAAE,IAAI;MACjBC,aAAa,EAAE,CAAC,iBAAiB,EAAE,kBAAkB,CAAC;MACtDC,gBAAgB,EAAE,IAAI,CAACjB,OAAO,CAACkB,QAAQ,EAAE,CACtCC,MAAM,EAAE,CACRC,kBAAkB,EAAE,CACpBC,gBAAgB,EAAE;MACrBC,cAAc,EAAE,IAAI,CAACtB,OAAO,CAACuB,gBAAgB,CAACC,KAAK;KACpD,CAAC;IAEF,IAAI,CAACvB,UAAU,CAACwB,MAAM,CAAC,IAAI7C,eAAe,CAACC,uBAAuB,CAAC,CAAC;EACtE;EAEQ8B,cAAcA,CAAA;IACpB,IAAI,IAAI,CAACV,UAAU,EAAEyB,WAAW,EAAE,EAAE;MAClC,IAAI,CAACzB,UAAU,CAAC0B,MAAM,EAAE;;IAE1B,IAAI,CAAC1B,UAAU,EAAE2B,OAAO,EAAE;IAC1B,IAAI,CAAC3B,UAAU,GAAG,IAAI;EACxB;;;uBAlEWH,cAAc;IAAA;EAAA;;;aAAdA,cAAc;MAAA+B,OAAA,EAAd/B,cAAc,CAAAgC,IAAA;MAAAC,UAAA,EAFb;IAAM;EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}