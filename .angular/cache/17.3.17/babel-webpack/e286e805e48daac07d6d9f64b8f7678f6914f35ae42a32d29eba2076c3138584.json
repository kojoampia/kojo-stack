{"ast":null,"code":"import { mergeMap } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../auth/account.service\";\nimport * as i2 from \"../auth/auth-jwt.service\";\nexport class LoginService {\n  constructor(accountService, authServerProvider) {\n    this.accountService = accountService;\n    this.authServerProvider = authServerProvider;\n  }\n  login(credentials) {\n    return this.authServerProvider.login(credentials).pipe(mergeMap(() => this.accountService.identity(true)));\n    ;\n  }\n  logout() {\n    this.authServerProvider.logout().subscribe({\n      next: () => {\n        this.accountService.authenticate(null);\n      },\n      error: () => {\n        this.accountService.authenticate(null);\n      }\n    });\n  }\n  static {\n    this.ɵfac = function LoginService_Factory(t) {\n      return new (t || LoginService)(i0.ɵɵinject(i1.AccountService), i0.ɵɵinject(i2.AuthServerProvider));\n    };\n  }\n  static {\n    this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n      token: LoginService,\n      factory: LoginService.ɵfac,\n      providedIn: 'root'\n    });\n  }\n}","map":{"version":3,"names":["mergeMap","LoginService","constructor","accountService","authServerProvider","login","credentials","pipe","identity","logout","subscribe","next","authenticate","error","i0","ɵɵinject","i1","AccountService","i2","AuthServerProvider","factory","ɵfac","providedIn"],"sources":["/home/kojo/work/JojoAddisonDev/kojo-stack/src/app/core/login/login.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { mergeMap } from 'rxjs/operators';\nimport { Login } from './login.model';\nimport { AccountService } from '../auth/account.service';\nimport { AuthServerProvider } from '../auth/auth-jwt.service';\nimport { Account } from './account.model';\n\n@Injectable({ providedIn: 'root' })\nexport class LoginService {\n  constructor(private readonly accountService: AccountService, private readonly authServerProvider: AuthServerProvider) {}\n\n  login(credentials: Login): Observable<Account | null> {\n    return this.authServerProvider.login(credentials)\n                .pipe(\n                  mergeMap(() => this.accountService.identity(true))\n                );\n                \n    ;\n  }\n\n  logout(): void {\n    this.authServerProvider.logout().subscribe({\n      next: () => {\n        this.accountService.authenticate(null);\n      },\n      error: () => {\n        this.accountService.authenticate(null);\n      }\n    });\n  }\n}\n"],"mappings":"AAEA,SAASA,QAAQ,QAAQ,gBAAgB;;;;AAOzC,OAAM,MAAOC,YAAY;EACvBC,YAA6BC,cAA8B,EAAmBC,kBAAsC;IAAvF,KAAAD,cAAc,GAAdA,cAAc;IAAmC,KAAAC,kBAAkB,GAAlBA,kBAAkB;EAAuB;EAEvHC,KAAKA,CAACC,WAAkB;IACtB,OAAO,IAAI,CAACF,kBAAkB,CAACC,KAAK,CAACC,WAAW,CAAC,CACpCC,IAAI,CACHP,QAAQ,CAAC,MAAM,IAAI,CAACG,cAAc,CAACK,QAAQ,CAAC,IAAI,CAAC,CAAC,CACnD;IAEb;EACF;EAEAC,MAAMA,CAAA;IACJ,IAAI,CAACL,kBAAkB,CAACK,MAAM,EAAE,CAACC,SAAS,CAAC;MACzCC,IAAI,EAAEA,CAAA,KAAK;QACT,IAAI,CAACR,cAAc,CAACS,YAAY,CAAC,IAAI,CAAC;MACxC,CAAC;MACDC,KAAK,EAAEA,CAAA,KAAK;QACV,IAAI,CAACV,cAAc,CAACS,YAAY,CAAC,IAAI,CAAC;MACxC;KACD,CAAC;EACJ;;;uBArBWX,YAAY,EAAAa,EAAA,CAAAC,QAAA,CAAAC,EAAA,CAAAC,cAAA,GAAAH,EAAA,CAAAC,QAAA,CAAAG,EAAA,CAAAC,kBAAA;IAAA;EAAA;;;aAAZlB,YAAY;MAAAmB,OAAA,EAAZnB,YAAY,CAAAoB,IAAA;MAAAC,UAAA,EADC;IAAM;EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}