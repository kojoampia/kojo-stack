{"ast":null,"code":"import { inject } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { tap } from 'rxjs/operators';\nimport { StateStorageService } from '../auth/state-storage.service';\nimport { LoginService } from '../login/login.service';\nexport const authExpiredInterceptor = (req, next) => {\n  const loginService = inject(LoginService);\n  const stateStorageService = inject(StateStorageService);\n  const router = inject(Router);\n  return next(req).pipe(tap({\n    next: () => {},\n    error: err => {\n      if (err.status === 401 && err.url && !err.url.includes('api/v1/account')) {\n        stateStorageService.storeUrl(router.routerState.snapshot.url);\n        loginService.logout();\n        router.navigate(['/login']);\n      }\n    }\n  }));\n};","map":{"version":3,"names":["inject","Router","tap","StateStorageService","LoginService","authExpiredInterceptor","req","next","loginService","stateStorageService","router","pipe","error","err","status","url","includes","storeUrl","routerState","snapshot","logout","navigate"],"sources":["/home/kojo/work/JojoAddisonDev/kojo-stack/src/app/core/interceptors/auth-expired.interceptor.ts"],"sourcesContent":["import { HttpErrorResponse, HttpEvent, HttpHandlerFn, HttpInterceptorFn, HttpRequest } from '@angular/common/http';\nimport { inject } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { Observable } from 'rxjs';\nimport { tap } from 'rxjs/operators';\nimport { StateStorageService } from '../auth/state-storage.service';\nimport { LoginService } from '../login/login.service';\n\nexport const authExpiredInterceptor: HttpInterceptorFn = (\n  req: HttpRequest<unknown>,\n  next: HttpHandlerFn\n): Observable<HttpEvent<unknown>> => {\n  const loginService = inject(LoginService);\n  const stateStorageService = inject(StateStorageService);\n  const router = inject(Router);\n\n  return next(req).pipe(\n    tap({\n      next: () => {},\n      error: (err: HttpErrorResponse) => {\n        if (err.status === 401 && err.url && !err.url.includes('api/v1/account')) {\n          stateStorageService.storeUrl(router.routerState.snapshot.url);\n          loginService.logout();\n          router.navigate(['/login']);\n        }\n      },\n    })\n  );\n};\n"],"mappings":"AACA,SAASA,MAAM,QAAQ,eAAe;AACtC,SAASC,MAAM,QAAQ,iBAAiB;AAExC,SAASC,GAAG,QAAQ,gBAAgB;AACpC,SAASC,mBAAmB,QAAQ,+BAA+B;AACnE,SAASC,YAAY,QAAQ,wBAAwB;AAErD,OAAO,MAAMC,sBAAsB,GAAsBA,CACvDC,GAAyB,EACzBC,IAAmB,KACe;EAClC,MAAMC,YAAY,GAAGR,MAAM,CAACI,YAAY,CAAC;EACzC,MAAMK,mBAAmB,GAAGT,MAAM,CAACG,mBAAmB,CAAC;EACvD,MAAMO,MAAM,GAAGV,MAAM,CAACC,MAAM,CAAC;EAE7B,OAAOM,IAAI,CAACD,GAAG,CAAC,CAACK,IAAI,CACnBT,GAAG,CAAC;IACFK,IAAI,EAAEA,CAAA,KAAK,CAAE,CAAC;IACdK,KAAK,EAAGC,GAAsB,IAAI;MAChC,IAAIA,GAAG,CAACC,MAAM,KAAK,GAAG,IAAID,GAAG,CAACE,GAAG,IAAI,CAACF,GAAG,CAACE,GAAG,CAACC,QAAQ,CAAC,gBAAgB,CAAC,EAAE;QACxEP,mBAAmB,CAACQ,QAAQ,CAACP,MAAM,CAACQ,WAAW,CAACC,QAAQ,CAACJ,GAAG,CAAC;QAC7DP,YAAY,CAACY,MAAM,EAAE;QACrBV,MAAM,CAACW,QAAQ,CAAC,CAAC,QAAQ,CAAC,CAAC;;IAE/B;GACD,CAAC,CACH;AACH,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}