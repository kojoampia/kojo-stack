{"ast":null,"code":"import { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { SERVER_API_URL, KS_DASHBOARD_URL } from '@app/app.constants';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport class AuthServerProvider {\n  constructor(http) {\n    this.http = http;\n  }\n  getToken() {\n    return localStorage.getItem('authenticationToken') || sessionStorage.getItem('authenticationToken') || '';\n  }\n  login(credentials) {\n    return this.http.post(SERVER_API_URL + '/api/v1/auth', credentials).pipe(map(response => this.authenticateSuccess(response, credentials.rememberMe)));\n  }\n  logout() {\n    return new Observable(observer => {\n      localStorage.removeItem('authenticationToken');\n      sessionStorage.removeItem('authenticationToken');\n      localStorage.removeItem('generalWebAuthenticationToken');\n      sessionStorage.removeItem('generalWebAuthenticationToken');\n      localStorage.removeItem('credentials');\n      sessionStorage.removeItem('credentials');\n      observer.complete();\n    });\n  }\n  authenticateSuccess(response, rememberMe) {\n    const jwt = response.id_token;\n    if (rememberMe) {\n      localStorage.setItem('authenticationToken', jwt);\n    } else {\n      sessionStorage.setItem('authenticationToken', jwt);\n    }\n  }\n  /** AUTHENTICATING ON GENERAL WEB FOR WEBSOCKET CONNECTION **/\n  generalWebLogin(credentials) {\n    return this.http.post(KS_DASHBOARD_URL + '/api/v1/auth', credentials).pipe(map(response => this.generalWebAuthenticateSuccess(response, credentials.rememberMe)));\n  }\n  getGeneralWebToken() {\n    return localStorage.getItem('generalWebAuthenticationToken') || sessionStorage.getItem('generalWebAuthenticationToken') || '';\n  }\n  generalWebAuthenticateSuccess(response, rememberMe) {\n    const jwt = response.id_token;\n    if (rememberMe) {\n      localStorage.setItem('generalWebAuthenticationToken', jwt);\n    } else {\n      sessionStorage.setItem('generalWebAuthenticationToken', jwt);\n    }\n  }\n  static {\n    this.ɵfac = function AuthServerProvider_Factory(t) {\n      return new (t || AuthServerProvider)(i0.ɵɵinject(i1.HttpClient));\n    };\n  }\n  static {\n    this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n      token: AuthServerProvider,\n      factory: AuthServerProvider.ɵfac,\n      providedIn: 'root'\n    });\n  }\n}","map":{"version":3,"names":["Observable","map","SERVER_API_URL","KS_DASHBOARD_URL","AuthServerProvider","constructor","http","getToken","localStorage","getItem","sessionStorage","login","credentials","post","pipe","response","authenticateSuccess","rememberMe","logout","observer","removeItem","complete","jwt","id_token","setItem","generalWebLogin","generalWebAuthenticateSuccess","getGeneralWebToken","i0","ɵɵinject","i1","HttpClient","factory","ɵfac","providedIn"],"sources":["/home/kojo/work/JojoAddisonDev/kojo-stack/src/app/core/auth/auth-jwt.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { SERVER_API_URL, KS_DASHBOARD_URL } from '@app/app.constants';\nimport { Login } from '../login/login.model';\n\ntype JwtToken = {\n  id_token: string;\n};\n\n@Injectable({ providedIn: 'root' })\nexport class AuthServerProvider {\n  constructor(private http: HttpClient) {}\n\n  getToken(): string {\n    return localStorage.getItem('authenticationToken') || sessionStorage.getItem('authenticationToken') || '';\n  }\n\n  login(credentials: Login): Observable<void> {\n    return this.http\n      .post<JwtToken>(SERVER_API_URL + '/api/v1/auth', credentials)\n      .pipe(map(response => this.authenticateSuccess(response, credentials.rememberMe)));\n  }\n\n  logout(): Observable<void> {\n    return new Observable(observer => {\n      localStorage.removeItem('authenticationToken');\n      sessionStorage.removeItem('authenticationToken');\n      localStorage.removeItem('generalWebAuthenticationToken');\n      sessionStorage.removeItem('generalWebAuthenticationToken');\n      localStorage.removeItem('credentials');\n      sessionStorage.removeItem('credentials');\n      observer.complete();\n    });\n  }\n\n  private authenticateSuccess(response: JwtToken, rememberMe: boolean): void {\n    const jwt = response.id_token;\n    if (rememberMe) {\n      localStorage.setItem('authenticationToken', jwt);\n    } else {\n      sessionStorage.setItem('authenticationToken', jwt);\n    }\n  }\n\n  /** AUTHENTICATING ON GENERAL WEB FOR WEBSOCKET CONNECTION **/\n\n  generalWebLogin(credentials: Login): Observable<void> {\n    return this.http\n      .post<JwtToken>(KS_DASHBOARD_URL + '/api/v1/auth', credentials)\n      .pipe(map(response => this.generalWebAuthenticateSuccess(response, credentials.rememberMe)));\n  }\n\n  getGeneralWebToken(): string {\n    return (\n      localStorage.getItem('generalWebAuthenticationToken') || sessionStorage.getItem('generalWebAuthenticationToken') || ''\n    );\n  }\n\n  private generalWebAuthenticateSuccess(response: JwtToken, rememberMe: boolean): void {\n    const jwt = response.id_token;\n    if (rememberMe) {\n      localStorage.setItem('generalWebAuthenticationToken', jwt);\n    } else {\n      sessionStorage.setItem('generalWebAuthenticationToken', jwt);\n    }\n  }\n}\n"],"mappings":"AAEA,SAASA,UAAU,QAAQ,MAAM;AACjC,SAASC,GAAG,QAAQ,gBAAgB;AACpC,SAASC,cAAc,EAAEC,gBAAgB,QAAQ,oBAAoB;;;AAQrE,OAAM,MAAOC,kBAAkB;EAC7BC,YAAoBC,IAAgB;IAAhB,KAAAA,IAAI,GAAJA,IAAI;EAAe;EAEvCC,QAAQA,CAAA;IACN,OAAOC,YAAY,CAACC,OAAO,CAAC,qBAAqB,CAAC,IAAIC,cAAc,CAACD,OAAO,CAAC,qBAAqB,CAAC,IAAI,EAAE;EAC3G;EAEAE,KAAKA,CAACC,WAAkB;IACtB,OAAO,IAAI,CAACN,IAAI,CACbO,IAAI,CAAWX,cAAc,GAAG,cAAc,EAAEU,WAAW,CAAC,CAC5DE,IAAI,CAACb,GAAG,CAACc,QAAQ,IAAI,IAAI,CAACC,mBAAmB,CAACD,QAAQ,EAAEH,WAAW,CAACK,UAAU,CAAC,CAAC,CAAC;EACtF;EAEAC,MAAMA,CAAA;IACJ,OAAO,IAAIlB,UAAU,CAACmB,QAAQ,IAAG;MAC/BX,YAAY,CAACY,UAAU,CAAC,qBAAqB,CAAC;MAC9CV,cAAc,CAACU,UAAU,CAAC,qBAAqB,CAAC;MAChDZ,YAAY,CAACY,UAAU,CAAC,+BAA+B,CAAC;MACxDV,cAAc,CAACU,UAAU,CAAC,+BAA+B,CAAC;MAC1DZ,YAAY,CAACY,UAAU,CAAC,aAAa,CAAC;MACtCV,cAAc,CAACU,UAAU,CAAC,aAAa,CAAC;MACxCD,QAAQ,CAACE,QAAQ,EAAE;IACrB,CAAC,CAAC;EACJ;EAEQL,mBAAmBA,CAACD,QAAkB,EAAEE,UAAmB;IACjE,MAAMK,GAAG,GAAGP,QAAQ,CAACQ,QAAQ;IAC7B,IAAIN,UAAU,EAAE;MACdT,YAAY,CAACgB,OAAO,CAAC,qBAAqB,EAAEF,GAAG,CAAC;KACjD,MAAM;MACLZ,cAAc,CAACc,OAAO,CAAC,qBAAqB,EAAEF,GAAG,CAAC;;EAEtD;EAEA;EAEAG,eAAeA,CAACb,WAAkB;IAChC,OAAO,IAAI,CAACN,IAAI,CACbO,IAAI,CAAWV,gBAAgB,GAAG,cAAc,EAAES,WAAW,CAAC,CAC9DE,IAAI,CAACb,GAAG,CAACc,QAAQ,IAAI,IAAI,CAACW,6BAA6B,CAACX,QAAQ,EAAEH,WAAW,CAACK,UAAU,CAAC,CAAC,CAAC;EAChG;EAEAU,kBAAkBA,CAAA;IAChB,OACEnB,YAAY,CAACC,OAAO,CAAC,+BAA+B,CAAC,IAAIC,cAAc,CAACD,OAAO,CAAC,+BAA+B,CAAC,IAAI,EAAE;EAE1H;EAEQiB,6BAA6BA,CAACX,QAAkB,EAAEE,UAAmB;IAC3E,MAAMK,GAAG,GAAGP,QAAQ,CAACQ,QAAQ;IAC7B,IAAIN,UAAU,EAAE;MACdT,YAAY,CAACgB,OAAO,CAAC,+BAA+B,EAAEF,GAAG,CAAC;KAC3D,MAAM;MACLZ,cAAc,CAACc,OAAO,CAAC,+BAA+B,EAAEF,GAAG,CAAC;;EAEhE;;;uBAvDWlB,kBAAkB,EAAAwB,EAAA,CAAAC,QAAA,CAAAC,EAAA,CAAAC,UAAA;IAAA;EAAA;;;aAAlB3B,kBAAkB;MAAA4B,OAAA,EAAlB5B,kBAAkB,CAAA6B,IAAA;MAAAC,UAAA,EADL;IAAM;EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}