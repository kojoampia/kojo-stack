{"ast":null,"code":"import { inject } from '@angular/core';\nimport { tap } from 'rxjs/operators';\nimport { LoadingService } from '../../shared/toast/loading.service';\nimport { ToastService } from '../../shared/toast/toast.service';\nexport const errorHandlerInterceptor = (req, next) => {\n  const loadingService = inject(LoadingService);\n  const toastService = inject(ToastService);\n  return next(req).pipe(tap({\n    next: () => {},\n    error: error => {\n      loadingService.hide();\n      if (!(error.status === 401 && (error.message === '' || error.url?.includes('api/v1/account')))) {\n        toastService.open({\n          type: 'error',\n          message: error.message\n        }, 5000);\n      }\n    }\n  }));\n};","map":{"version":3,"names":["inject","tap","LoadingService","ToastService","errorHandlerInterceptor","req","next","loadingService","toastService","pipe","error","hide","status","message","url","includes","open","type"],"sources":["/home/kojo/work/JojoAddisonDev/kojo-stack/src/app/core/interceptors/errorhandler.interceptor.ts"],"sourcesContent":["import {\n  HttpErrorResponse,\n  HttpEvent,\n  HttpHandlerFn,\n  HttpInterceptorFn,\n  HttpRequest,\n} from '@angular/common/http';\nimport { inject } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { tap } from 'rxjs/operators';\nimport { ToastData } from '@app/shared/toast/toast.component';\nimport { LoadingService } from '../../shared/toast/loading.service';\nimport { ToastService } from '../../shared/toast/toast.service';\n\nexport const errorHandlerInterceptor: HttpInterceptorFn = (\n  req: HttpRequest<unknown>,\n  next: HttpHandlerFn\n): Observable<HttpEvent<unknown>> => {\n  const loadingService = inject(LoadingService);\n  const toastService = inject(ToastService);\n\n  return next(req).pipe(\n    tap({\n      next: () => {},\n      error: (error: HttpErrorResponse) => {\n        loadingService.hide();\n        if (\n          !(\n            error.status === 401 &&\n            (error.message === '' || error.url?.includes('api/v1/account'))\n          )\n        ) {\n          toastService.open(\n            { type: 'error', message: error.message } as ToastData,\n            5000\n          );\n        }\n      },\n    })\n  );\n};\n"],"mappings":"AAOA,SAASA,MAAM,QAAQ,eAAe;AAEtC,SAASC,GAAG,QAAQ,gBAAgB;AAEpC,SAASC,cAAc,QAAQ,oCAAoC;AACnE,SAASC,YAAY,QAAQ,kCAAkC;AAE/D,OAAO,MAAMC,uBAAuB,GAAsBA,CACxDC,GAAyB,EACzBC,IAAmB,KACe;EAClC,MAAMC,cAAc,GAAGP,MAAM,CAACE,cAAc,CAAC;EAC7C,MAAMM,YAAY,GAAGR,MAAM,CAACG,YAAY,CAAC;EAEzC,OAAOG,IAAI,CAACD,GAAG,CAAC,CAACI,IAAI,CACnBR,GAAG,CAAC;IACFK,IAAI,EAAEA,CAAA,KAAK,CAAE,CAAC;IACdI,KAAK,EAAGA,KAAwB,IAAI;MAClCH,cAAc,CAACI,IAAI,EAAE;MACrB,IACE,EACED,KAAK,CAACE,MAAM,KAAK,GAAG,KACnBF,KAAK,CAACG,OAAO,KAAK,EAAE,IAAIH,KAAK,CAACI,GAAG,EAAEC,QAAQ,CAAC,gBAAgB,CAAC,CAAC,CAChE,EACD;QACAP,YAAY,CAACQ,IAAI,CACf;UAAEC,IAAI,EAAE,OAAO;UAAEJ,OAAO,EAAEH,KAAK,CAACG;QAAO,CAAe,EACtD,IAAI,CACL;;IAEL;GACD,CAAC,CACH;AACH,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}