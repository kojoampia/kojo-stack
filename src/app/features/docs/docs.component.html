<div class="flex flex-col md:flex-row gap-6 h-[calc(100vh-140px)] animate-in fade-in">
  <!-- Doc List -->
  <div class="w-full md:w-1/3 bg-slate-900 border border-slate-800 rounded-lg overflow-hidden flex flex-col">
    <div class="p-4 border-b border-slate-800 bg-slate-950/50 font-bold text-slate-200 flex justify-between items-center">
      <span>Knowledge Base</span>
      <span class="text-[10px] bg-slate-800 px-2 py-1 rounded border border-slate-700">v2026.1</span>
    </div>
    <div class="overflow-y-auto p-2 space-y-2 flex-1">
      @for (doc of docs(); track doc.id) {
        <button 
          (click)="selectedDoc.set(doc)"
          [ngClass]="selectedDoc()?.id === doc.id ? 'bg-blue-600/20 border-blue-500 shadow-md shadow-blue-900/20' : 'bg-slate-800/30 border-transparent hover:border-slate-600 hover:bg-slate-800'"
          class="w-full text-left p-3 rounded border transition-all group relative"
        >
          <div class="flex justify-between items-start mb-1">
            <span class="text-xs font-mono text-cyan-500">{{ doc.id }}</span>
            <span class="text-[10px] px-1.5 py-0.5 rounded bg-slate-950 text-slate-400 border border-slate-800">{{ doc.type }}</span>
          </div>
          <div class="font-bold text-sm text-slate-200 mb-2 group-hover:text-cyan-400 transition-colors line-clamp-2">{{ doc.title }}</div>
          <div class="flex flex-wrap gap-1">
            @for (tag of doc.tags; track tag) {
              <span class="text-[9px] text-slate-500 px-1 rounded bg-slate-900">#{{tag}}</span>
            }
          </div>
        </button>
      }
    </div>
  </div>

  <!-- Doc Viewer -->
  <div class="w-full md:w-2/3 bg-slate-900 border border-slate-800 rounded-lg p-6 overflow-y-auto relative scrollbar-thin scrollbar-thumb-slate-700">
    @if (selectedDoc(); as doc) {
      <div class="absolute top-10 right-10 opacity-[0.03] pointer-events-none select-none">
        <i class="fas fa-file-code text-9xl"></i>
      </div>
      
      <div class="mb-8 border-b border-slate-800 pb-6">
        <div class="flex items-center gap-3 mb-4">
          <span class="px-2 py-1 rounded bg-cyan-500/10 text-cyan-400 text-xs font-bold border border-cyan-500/20 tracking-wider uppercase">{{ doc.type }}</span>
          <span class="text-slate-500 text-xs font-mono"><i class="far fa-clock mr-1"></i> Updated: {{ doc.lastUpdated }}</span>
        </div>
        <h2 class="text-3xl font-bold text-white mb-2">{{ doc.title }}</h2>
        <div class="text-sm text-slate-500">ID: <span class="font-mono text-slate-400">{{ doc.id }}</span></div>
      </div>

      <div class="prose prose-invert prose-sm max-w-none text-slate-300">
        <div class="whitespace-pre-wrap font-mono text-sm leading-relaxed">{{ doc.content }}</div>
      </div>
    } @else {
      <div class="h-full flex flex-col items-center justify-center text-slate-500 opacity-50 select-none">
        <div class="w-20 h-20 rounded-full bg-slate-800 flex items-center justify-center mb-6">
          <i class="fas fa-book text-4xl text-slate-600"></i>
        </div>
        <h3 class="text-xl font-bold text-slate-400 mb-2">Select a Document</h3>
        <p class="text-sm">View Architectural Decision Records (ADRs) and specs.</p>
      </div>
    }
  </div>
</div>
